# M's Works Webサイト デプロイ手順書 (Lolipop対応)

このドキュメントでは、完成したReactアプリケーションをロリポップ！レンタルサーバーにアップロードして公開する手順を説明します。

## 1. ビルドの実行

まず、ローカル環境で本番用のファイルを生成します。

```bash
cd /Users/muraokashou/ms-works
npm run build
```

これにより、`dist` フォルダが作成され、その中に公開用のファイル一式が生成されます。

## 2. ファイルのアップロード

FTPソフト（FileZillaなど）またはロリポップの「ロリポップ！FTP」を使用して、ファイルをサーバーにアップロードします。

1.  **接続先**: ロリポップのFTP情報を参照してください。
2.  **アップロードする場所**: 公開したいディレクトリ（例: `web` や `public_html` 直下、またはサブディレクトリ）。
3.  **アップロードするファイル**:
    `dist` フォルダの中身**すべて**をアップロードしてください。
    
    *   `assets` フォルダ
    *   `index.html`
    *   `.htaccess` (※重要: これがないとページ遷移時に404エラーになります)
    *   `vite.svg`

## 3. 動作確認

アップロード完了後、WebサイトのURLにアクセスして、以下の動作を確認してください。

1.  **トップページが表示されるか**: デザイン崩れがないか。
2.  **ページ遷移ができるか**: メニューから「会社情報」や「事業案内」に移動できるか。
3.  **管理画面**: `/admin` にアクセスし、ログイン画面が表示されるか。
    *   ※本番環境で初めて管理画面を使う場合は、管理者アカウントが必要です。
    *   `/admin/secret-signup` にアクセスして、最初の管理者を作成してください。

## トラブルシューティング

*   **ページ遷移すると404エラーになる**:
    *   `.htaccess` ファイルがアップロードされているか確認してください。これがReactのルーティングを制御しています。
    *   Macではドットから始まるファイルが見えにくい場合があります。`Saved Files/All My Files`などで確認するか、`Command + Shift + .` で隠しファイルを表示してください。

*   **画面が真っ白になる**:
    *   ブラウザの開発者ツール（F12）の「Console」タブを確認し、エラーが出ていないか確認してください。
    *   パスの問題（`/` から始まる絶対パスなど）が原因の場合、`vite.config.js` の `base` 設定を調整する必要があるかもしれません（現在はデフォルト設定です）。

## 更新方法

サイトの内容を更新したい場合（例：コード修正後）：

1.  ローカルで修正。
2.  `npm run build` を再度実行。
3.  `dist` フォルダの中身をサーバーに上書きアップロード。

なお、管理画面から更新できる内容（お知らせ、施工実績）については、ファイルのアップロードは不要です。管理画面から操作するだけで即座に反映されます。
